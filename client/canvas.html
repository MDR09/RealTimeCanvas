<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaborative Canvas - Drawing</title>
    <link rel="stylesheet" href="canvas-style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-left">
            <h2 class="room-title">ğŸ¨ Collaborative Canvas</h2>
            <div class="room-info">
                <span class="badge">Room: <strong id="roomIdDisplay">Loading...</strong></span>
                <span class="badge">You: <strong id="userNameDisplay">Loading...</strong></span>
            </div>
        </div>
        
        <div class="navbar-center">
            <span class="users-count">ğŸ‘¥ <strong id="usersCount">1</strong> user(s) online</span>
            <div class="users-list" id="usersList"></div>
        </div>

        <div class="navbar-right">
            <button class="btn-icon" onclick="toggleFullscreen()" title="Fullscreen">
                ğŸ–¥ï¸
            </button>
            <button class="btn-icon danger" onclick="leaveRoom()" title="Leave Room">
                ğŸšª Leave
            </button>
        </div>
    </nav>

    <!-- Toolbar -->
    <div class="toolbar">
        <!-- Drawing Tools -->
        <div class="tool-group">
            <label>Tools</label>
            <button class="tool-btn active" id="brushTool" onclick="selectTool('brush')" title="Brush">
                ğŸ–Œï¸ Brush
            </button>
            <button class="tool-btn" id="eraserTool" onclick="selectTool('eraser')" title="Eraser">
                ğŸ§¹ Eraser
            </button>
            <select id="shapeDropdown" class="shape-dropdown" onchange="selectTool(this.value)">
                <option value="line">ğŸ“ Line</option>
                <option value="rectangle">â–­ Rectangle</option>
                <option value="circle">â­• Circle</option>
            </select>
        </div>

        <!-- Color Picker -->
        <div class="tool-group">
            <label>Color</label>
            <div class="color-picker-container">
                <input type="color" id="colorPicker" value="#000000" onchange="changeColor(this.value)">
                <span class="color-preview" id="colorPreview" style="background: #000000;"></span>
            </div>
        </div>

        <!-- Stroke Width -->
        <div class="tool-group">
            <label>Size</label>
            <input type="range" id="strokeWidth" min="1" max="50" value="3" 
                   oninput="changeStrokeWidth(this.value)">
            <span class="stroke-display" id="strokeDisplay">3</span>
        </div>

        <!-- Actions -->
        <div class="tool-group">
            <label>Actions</label>
            <button class="tool-btn" onclick="undoAction()" title="Undo">
                â†¶ Undo
            </button>
            <button class="tool-btn" onclick="redoAction()" title="Redo">
                â†· Redo
            </button>
            <button class="tool-btn" onclick="clearCanvas()" title="Clear Canvas">
                ğŸ—‘ï¸ Clear
            </button>
        </div>

        <!-- Download -->
        <div class="tool-group">
            <button class="tool-btn" onclick="downloadCanvas()" title="Download Drawing">
                â¬‡ï¸ Download
            </button>
        </div>
    </div>

    <!-- Canvas Container -->
    <div class="canvas-container">
        <canvas id="canvas"></canvas>
        
        <!-- Remote Users Canvas Layer -->
        <canvas id="remoteCanvas" class="remote-canvas"></canvas>
        
        <!-- Cursor Indicators -->
        <div class="cursors-container" id="cursorsContainer"></div>
    </div>

    <!-- Bottom Info Bar -->
    <div class="info-bar">
        <div class="info-item">
            <span>ğŸ“ Position: <strong id="posDisplay">0, 0</strong></span>
        </div>
        <div class="info-item">
            <span>ğŸ¯ Tool: <strong id="toolDisplay">Brush</strong></span>
        </div>
        <div class="info-item">
            <span id="statusDisplay">âœ… Connected</span>
        </div>
    </div>

    <!-- Scripts -->
    <script src="websocket.js"></script>
    <script src="canvas.js"></script>
</body>
</html>
